<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="net.solarnetwork.central.datum.dao.mybatis.GeneralLocationDatum">

	<select id="findall-GeneralLocationDatum-ReportingGeneralLocationDatum-Year-count" resultType="long">
		SELECT count(datum.ts_start)
		FROM (
			<include refid="fragment-findall-ReportingGeneralLocationDatum-time-rounded-datum-agg">
				<property name="date_field" value="year" />
				<property name="date_field_agg" value="year" />
			</include>
		) datum
	</select>
	
	<select id="findall-GeneralLocationDatum-ReportingGeneralLocationDatum-Year" resultMap="ReportingGeneralLocationDatumMatchResult" fetchSize="250" resultSetType="FORWARD_ONLY">
		SELECT
			<include refid="fragment-GeneralLocationDatum-aggregation-result"/>
		FROM (
			<include refid="fragment-findall-ReportingGeneralLocationDatum-time-rounded-datum-agg">
				<property name="date_field" value="year" />
				<property name="date_field_agg" value="year" />
			</include>
		) datum
		<include refid="fragment-findall-ReportingGeneralLocationDatum-order"/>
	</select>

</mapper>
